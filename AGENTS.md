# Repository Guidelines

## プロジェクト構成とモジュール整理
このテンプレートは最小構成です。実装コードは `src/` にまとめ、領域別に `src/api`・`src/core`・`src/ui` のように分類して可読性を保ちます。テストは `tests/` 直下で同じ構造を鏡写しにし、単体テストは `tests/unit`、結合テストは `tests/integration` に配置し、共有フィクスチャは `tests/fixtures` に置いてください。自動化スクリプトは `scripts/`、リリースに含める設定は `config/` に置き、ローカル専用設定（例 `config/local.yml`）は `.gitignore` で除外します。

## ビルド・テスト・開発コマンド
開発体験を揃えるため `Makefile` など共通エントリを用意します。`make setup` で依存関係と環境ファイルを整備し、`make lint` で静的解析やフォーマッタを実行し、`make test` で自動テストを一括実行し、`make run` でローカルアプリやサンドボックスを起動します。各ターゲットは `npm run` や `poetry run` など既存ツールの薄いラッパーにし、更新があれば README に追記してください。

## コーディングスタイルと命名規約
使用言語に合わせたフォーマッタ（ESLint/Prettier、Ruff/Black、gofmt など）を導入し CI で強制します。マークアップやスクリプトは 2 スペース、Python 系は 4 スペースを標準とし、UTF-8・LF を共通のエンコードとしてください。公開クラスや型は `PascalCase`、関数や変数は `camelCase`、ファイル・ディレクトリは `kebab-case` を採用します。`.editorconfig` をルートに配置し、エディタ差異を抑えましょう。

## テスト方針
単体テストは該当機能の近くに `tests/unit` として配置し、ランタイムの命名規則（`*.spec.*` や `*_test.*` など）に合わせます。モジュールを跨ぐシナリオは `tests/integration` にまとめ、必要なフィクスチャは `tests/fixtures` でバージョン管理します。新規コードは分岐網羅 80% 以上を目標とし、例外がある場合はプルリクエストで理由を説明してください。`make test` はプッシュ前に必ず実行し、手動確認があれば PR 本文に記載します。

## コミットとプルリクエスト指針
まだであれば Git を初期化し、意図を機械可読にするため Conventional Commits（`feat:`、`fix:`、`chore:` など）を用います。ブランチは短命に保ち、`feature/<チケット>`・`bugfix/<チケット>` のように命名します。プルリクエストには簡潔な概要、関連 Issue（例 `Closes #123`）、UI や CLI 変更の証跡、テスト・Lint・ドキュメント更新チェックリストを含めてください。最低 1 名のレビューを受け、マージ時は squash で履歴を直線的に維持します。

## セキュリティと設定の注意点
機密情報はリポジトリに含めず、ローカル用の秘密は `.env.local` に、共有用の雛形はクリーニングした `.env.example` に保存します。環境変数ベースの設定を優先し、12-factor を意識した構成を守ってください。依存パッケージ追加時は CVE を確認し、リリース前には `make audit` などのセキュリティスキャナを実行します。

## レビュー観点カタログ
- レビューやコメントは日本語で行うこと
- レビュー開始前に `docs/review-guidelines.md` を確認し、対象別・言語別のチェックポイントを共有する
- Makefile や CI（`.github/`）の変更時はセキュリティ権限と秘密情報の扱いを重点的に確認する
- ドキュメント更新（README・docs・AGENTS）では表記揺れと矛盾、リンク切れを必ずダブルチェックする
- 各言語のフレームワーク別ガイドに沿って、自動テストとリンターの結果を PR に記載する

## レビュー時の運用メモ
- レビューコメントは根拠（仕様・ドキュメント箇所）と提案をセットで記述し、不要な場合も理由を残す
- 重要なセキュリティ指摘はハイライトし、必要であれば関係者へ同期する
- レビュー後は PR テンプレートのチェックボックスで確認済み項目を明示し、ナレッジを docs に反映する

## プルリクエスト運用補足
- PR を作成する際は `.github/pull_request_template.md` に従って各セクションを埋めてください。
- テストや確認手順の出力はテンプレートの「動作確認」セクションで報告し、未実施の場合は理由を明記してください。
