# レビューチェックリスト

## 目的
- 変更内容が既存の開発ガイドラインや運用方針と矛盾しないかを素早く確認する
- 誤字脱字や設定漏れ、セキュリティ上のリスクをレビュー段階で検知する
- 言語・フレームワークごとの品質基準を共有し、チーム全体で統一感のあるレビューを行う

## 共通観点
- **仕様整合性**: 変更が仕様・Issue・PR で宣言された目的と一致しているか、抜け漏れや矛盾がないか
- **ドキュメント反映**: README・docs・AGENTS の内容が最新の変更点を反映し、重複や相互矛盾がないか
- **テスト保証**: `make test` 等の共通フローが成功するか、必要な単体/結合テストが追加・更新されているか
- **セキュリティ/秘密情報**: 機密情報が含まれていないか、権限や公開範囲が適切か、依存関係の脆弱性がないか

## 対象別チェック

この文書では対象ごとのチェック観点を整理し、実際のレビュー手順やエージェント向け運用メモはリポジトリ直下の [`AGENTS.md`](../AGENTS.md) に集約しています。詳細なフローを確認するときはそちらを参照してください。

### Makefile
- `setup`/`lint`/`test`/`run` 等の必須ターゲットが存在し、README に記載されたコマンドと整合しているか
- 実際に存在しないスクリプトを呼び出していないか、前提となるツールのバージョンが明記されているか
- `PHONY` の宣言や冪等（べきとう）な処理になっているかを確認し、破壊的操作の有無をレビューする
- CI 用のターゲットがある場合はジョブと同期しており、ローカルと CI で挙動が乖離しないか

### README.md
- プロジェクト概要、セットアップ手順、主要コマンドが最新であり、リンク切れや誤記がないか
- 依存ライブラリ・環境変数・必要なサービスが明示されており、`.env.example` などが更新されているか
- 変更点に応じてスクリーンショットやサンプルリクエスト/レスポンスが更新されているか
- 多言語対応や表記揺れがないか、翻訳済みセクションとの整合も確認する

### docs/ 配下
- ページ構成が README と重複せず補完関係になっているか、最新版の仕様を正しく説明しているか
- 内部リンク・外部リンクが有効で、図表やコードスニペットが最新の API/CLI を反映しているか
- 専門用語や略語の定義が統一されているか、変更履歴や決定事項が追跡できるか
- アクセス制御やセキュリティ関連の記述が正確か、機微情報が紛れ込んでいないか

### AGENTS.md
- 自動化エージェントや AI 支援ツール向けの指示が最新で、一貫したトーン・優先順位になっているか
- 開発ガイドライン（構成・命名・テスト方針）と齟齬がないか、重複手順がないか
- 新しい役割や制約が追加された際に明確に記載されているか、責務が曖昧でないか
- 外部公開を想定しない内部情報が含まれていないか、共有範囲に応じたマスキングが行われているか
- 詳細なレビュー手順や運用メモはリポジトリ直下の [`AGENTS.md`](../AGENTS.md) で最新の情報を確認する

### .github/ 配下（CI/テンプレート）
- Workflow で使用する GitHub Actions がバージョン固定され、不要な権限 (`permissions`) を要求していないか
- Secrets を直接ログに出力していないか、Self-hosted runner を想定する設定が適切か
- `pull_request_template.md` やレビュー用ドキュメントが最新のプロセスと整合しているか
- セキュリティスキャン（`make audit` 等）や依存更新が自動実行されるか、必要に応じて通知設定があるか

## 言語・フレームワーク別チェック

### Goa (Go)
- `go.mod`/`go.sum` が更新されている場合、モジュールバージョンの整合とライセンス確認を行う
- ハンドラやデザイン定義が `goa gen` の出力と一致しているか、生成物に手動変更が混在していないか
- `go test`, `golangci-lint` 等の静的解析が通るか、`context` やエラーハンドリングが適切か
- 並行処理やチャネル利用時にリークがないか、`defer` の順序・リソース解放を確認する

### Laravel (PHP)
- ルーティング・コントローラ・バリデーションが一貫しており、`FormRequest` や `Policy` で権限制御が行われているか
- `config/` の変更が `.env.example` と同期しているか、キャッシュクリアやマイグレーション手順が README に反映されているか
- Eloquent クエリが N+1 を発生させないか、`Resource`/`Collection` でレスポンス整形が行われているか
- テスト（Feature/Unit）がカバーされているか、`phpcs`/`phpstan` 等の自動チェックが通るか

### FastAPI (Python)
- Pydantic モデルのバリデーションが適切か、`typing`/`Annotated` による型定義が整っているか
- 依存注入 (`Depends`) やミドルウェアが副作用なく設計され、例外ハンドラが統一されているか
- `uvicorn`/`gunicorn` の起動パラメータが安全で、CORS・認可設定が漏れていないか
- `pytest` ベースのテストが追加されているか、`ruff`/`black`/`mypy` での静的解析が通るか

### Next.js (TypeScript)
- `app`/`pages` 構成が最新の Next.js 推奨に従い、`router`/`metadata` 設定が更新されているか
- `getServerSideProps` や API Routes でのデータ取得がキャッシュ・エラー処理を考慮しているか
- TypeScript の型定義が厳格 (`strict` モード) に保たれ、`eslint`/`prettier` が通るか
- Supabase や外部 API などの認証情報が環境変数経由で管理され、`NEXT_PUBLIC_` の扱いが適切か

